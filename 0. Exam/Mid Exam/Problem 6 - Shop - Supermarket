def product_checker(item, list1):
    if item in list1:
        return True
    return False
    
all_products = input().split("|")
command = input()

while not command == "Shop!":
    command = command.split("%")
    com = command[0]
    product = command[1]
    
    if com == "Important":
        if product_checker(product, all_products):
            all_products.remove(product)
        all_products.insert(0, product)
        
    elif com == "Add":
        if not product_checker(product, all_products):
            all_products.append(product)
        else:
            print(f"The product is already in the list.")
            
    elif com == "Swap":
        product2 = command[2]
        if product_checker(product, all_products) and product_checker(product2, all_products):
            product_a = all_products[all_products.index(product)]
            product_b = all_products[all_products.index(product2)]
            product_a, product_b = product_b, product_a
        else:
            if product_checker(product, all_products):
                print(f"Product {product2} missing!")
            else:
                print(f"Product {product} missing!")
                
    elif com == "Remove":
        if product_checker(product, all_products):
            all_products.remove(product)
    command = input()
    
for num in range(1, len(all_products)+1):
    print(f"{num}. {all_products[num-1]}")
